version: 2

sources:
  - name: operational_system
    schema: public
    tables:
      - name: subscription
        columns:
          - name: email
            tests:
              - dbt_expectations.expect_column_to_exist
              - not_null

seeds:
  - name: email_provider
    columns:
      - name: name
        tests:
          - dbt_expectations.expect_column_to_exist
          - not_null
      - name: domain
        tests:
          - dbt_expectations.expect_column_to_exist
          - dbt_expectations.expect_column_values_to_not_be_null
          - unique
    tests:
      - dbt_expectations.expect_table_row_count_to_equal:
          value: 36

exposures:

  - name: THE_dashboard
    type: dashboard
    maturity: high
    url: https://www.innoq.com/dbt-dashboard-url
    description: >
      EVERYTHING on one dashboard!!!111

    depends_on:
      - ref('subscription_cleaned')

    owner:
      name: Heribert Innoq
      email: heribert.innoq@innoq.com